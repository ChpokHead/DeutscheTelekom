<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Просмотр отчета</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link href="/static/css/employeeOrderEditPage.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="/static/images/logo.svg">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <style>
        h4 {
            text-align: start;
            display: block;
            margin-inline-start: 0px;
            margin-inline-end: 0px;
        }
    </style>
</head>
<body>
<div class="col py-1 px-4">
    <div class="row py-1">
        <div class="col">
            <div class="d-flex w-100 justify-content-between">
                <h1 style="color: #ff910a" th:text="'Отчет по заказу #' + ${report.orderId}"></h1>
            </div>
        </div>
        <div class="col">
            <div class="py-1 d-flex w-100 justify-content-end">
                <a id = "report-close" class="btn btn-danger btn-lg" th:href="@{/employeeReport}">
                    <span>Завершить просмотр</span>
                </a>
            </div>
        </div>
    </div>
    <div class="separator">
        <div class="line"></div>
        <p>Даты</p>
        <div class="line"></div>
    </div>
    <div class="row py-1" >
        <div class="col">
            <div class="row">
                <h4 style="color: #582630" th:text="'Дата формирования отчета: ' + ${report.getReportCreationDate()}"></h4>
            </div>
            <div class="row">
                <h4 style="color: #582630" th:text="'Дата создания заказа: ' + ${report.getOrderCreationDate()}"></h4>
            </div>
            <div class="row">
                <h4 style="color: #582630" th:text="'Дата начала выполнения заказа: ' + ${report.getOrderStartDate()}"></h4>
            </div>
            <div class="row">
                <h4 style="color: #582630" th:text="'Дата завершения выполнения заказа: ' + ${report.getOrderEndDate()}"></h4>
            </div>
        </div>
    </div>
    <div class="separator">
        <div class="line"></div>
        <p>Водители</p>
        <div class="line"></div>
    </div>
    <div class="row py-1">
        <div class="row" th:each="driver : ${report.getDrivers().split(',')}">
            <h4 style="color: #582630" th:text="${driver}"></h4>
        </div>
    </div>
    <div class="separator">
        <div class="line"></div>
        <p>Фура</p>
        <div class="line"></div>
    </div>
    <div class="row py-1">
        <h4 style="color: #582630" th:text="'Рег. номер: ' + ${report.getTruck()}"></h4>
    </div>
    <div class="separator">
        <div class="line"></div>
        <p>Маршрут</p>
        <div class="line"></div>
    </div>
    <div class="row py-2">
        <h4 style="color: #582630" th:text="'Протяженность маршрута: ' + ${report.getDistance()} + ' км'"></h4>
    </div>
    <div class="row" th:each="route, idx : ${report.getRoute().split(',')}">
        <h4 style="color: #582630" th:text="${route}"></h4>
        <div class="vl" th:id="'vl' + ${idx.index}">
            <svg height="20" width="200">
                <line x1="150" y1="0" x2="150" y2="20" style="stroke:gray;stroke-width:2" />
                Sorry, your browser does not support inline SVG.
            </svg>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        numOfElements = document.getElementsByClassName("vl").length;

        if (numOfElements > 0) {
            document.getElementById("vl" + (numOfElements - 1)).remove();
        }
    })
</script>
</body>
</html>